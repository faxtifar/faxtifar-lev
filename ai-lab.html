<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI –õ–∞–± - –ü–æ–º–æ—â–Ω–∏–∫ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); color: #e2e8f0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow-x: hidden; min-height: 100vh; }
        .particles-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; overflow: hidden; }
        .particle { position: absolute; width: 4px; height: 4px; background: radial-gradient(circle, #60a5fa, #3b82f6); border-radius: 50%; opacity: 0.6; animation: fall linear infinite; box-shadow: 0 0 10px rgba(96, 165, 250, 0.8); }
        @keyframes fall { to { transform: translateY(100vh) translateX(var(--tx)); opacity: 0; } }
        .content { position: relative; z-index: 10; }
        nav { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(96, 165, 250, 0.2); position: sticky; top: 0; z-index: 100; padding: 1rem 2rem; }
        .nav-container { max-width: 6xl; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .nav-logo { font-size: 1.5rem; font-weight: 900; background: linear-gradient(135deg, #60a5fa, #a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-decoration: none; cursor: pointer; }
        .nav-links { display: flex; gap: 2rem; }
        .nav-links a { color: #cbd5e1; text-decoration: none; transition: color 0.3s ease; }
        .nav-links a:hover { color: #60a5fa; }
        @media (max-width: 768px) { .nav-links { display: none; } }
        .ai-lab-container { max-width: 1200px; margin: 0 auto; padding: 2rem; min-height: calc(100vh - 80px); display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; }
        .ai-info { background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(167, 139, 250, 0.1)); border: 2px solid rgba(96, 165, 250, 0.3); border-radius: 15px; padding: 2rem; height: fit-content; position: sticky; top: 100px; }
        .ai-info h2 { font-size: 1.8rem; margin-bottom: 1rem; background: linear-gradient(135deg, #60a5fa, #a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .ai-info p { color: #cbd5e1; line-height: 1.8; margin-bottom: 1rem; font-size: 0.95rem; }
        .chat-container { background: linear-gradient(135deg, rgba(96, 165, 250, 0.05), rgba(167, 139, 250, 0.05)); border: 2px solid rgba(96, 165, 250, 0.3); border-radius: 15px; display: flex; flex-direction: column; height: 600px; overflow: hidden; }
        .chat-header { background: linear-gradient(135deg, rgba(96, 165, 250, 0.2), rgba(167, 139, 250, 0.2)); border-bottom: 1px solid rgba(96, 165, 250, 0.3); padding: 1.5rem; text-align: center; }
        .chat-header h3 { font-size: 1.3rem; color: #60a5fa; margin-bottom: 0.5rem; }
        .chat-header p { font-size: 0.85rem; color: #cbd5e1; }
        .chat-messages { flex: 1; overflow-y: auto; padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }
        .message { display: flex; gap: 0.75rem; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .message.user { justify-content: flex-end; }
        .message-avatar { width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1rem; flex-shrink: 0; }
        .message.ai .message-avatar { background: linear-gradient(135deg, #60a5fa, #3b82f6); }
        .message.user .message-avatar { background: linear-gradient(135deg, #a78bfa, #ec4899); }
        .message-content { max-width: 70%; padding: 0.75rem 1rem; border-radius: 10px; font-size: 0.95rem; line-height: 1.5; word-wrap: break-word; }
        .message.ai .message-content { background: rgba(96, 165, 250, 0.2); border: 1px solid rgba(96, 165, 250, 0.3); color: #cbd5e1; }
        .message.user .message-content { background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(167, 139, 250, 0.3)); border: 1px solid rgba(96, 165, 250, 0.5); color: #e2e8f0; }
        .message-content code { background: rgba(0, 0, 0, 0.3); padding: 0.2rem 0.4rem; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 0.9em; }
        .message-content pre { background: rgba(0, 0, 0, 0.5); padding: 1rem; border-radius: 8px; overflow-x: auto; margin: 0.5rem 0; }
        .message-content pre code { background: none; padding: 0; color: #e2e8f0; }
        .message-content strong { color: #60a5fa; font-weight: 600; }
        .message-content ul, .message-content ol { margin-left: 1.5rem; margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .message-content li { margin-bottom: 0.25rem; }
        .chat-input-area { border-top: 1px solid rgba(96, 165, 250, 0.3); padding: 1rem; background: rgba(15, 23, 42, 0.5); display: flex; gap: 0.75rem; align-items: flex-end; }
        .input-controls { display: flex; gap: 0.5rem; }
        .file-input-btn { background: linear-gradient(135deg, #8b5cf6, #6366f1); border: none; color: white; padding: 0.75rem 1rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem; }
        .file-input-btn:hover { transform: translateY(-2px); box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }
        #imageInput { display: none; }
        .chat-input { flex: 1; background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(96, 165, 250, 0.3); color: #e2e8f0; padding: 0.75rem 1rem; border-radius: 8px; font-size: 0.95rem; transition: all 0.3s ease; resize: none; max-height: 100px; font-family: inherit; }
        .chat-input:focus { outline: none; border-color: rgba(96, 165, 250, 0.8); box-shadow: 0 0 15px rgba(96, 165, 250, 0.3); }
        .send-btn { background: linear-gradient(135deg, #60a5fa, #3b82f6); border: none; color: white; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem; }
        .send-btn:hover { transform: translateY(-2px); box-shadow: 0 0 20px rgba(96, 165, 250, 0.5); }
        .send-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        @media (max-width: 1024px) { .ai-lab-container { grid-template-columns: 1fr; } .ai-info { position: static; } .chat-container { height: 500px; } .message-content { max-width: 90%; } }
        .chat-messages::-webkit-scrollbar { width: 8px; }
        .chat-messages::-webkit-scrollbar-track { background: rgba(96, 165, 250, 0.1); border-radius: 10px; }
        .chat-messages::-webkit-scrollbar-thumb { background: rgba(96, 165, 250, 0.3); border-radius: 10px; }
        .chat-messages::-webkit-scrollbar-thumb:hover { background: rgba(96, 165, 250, 0.5); }
        .typing-indicator { display: flex; gap: 4px; padding: 0.75rem 1rem; }
        .typing-dot { width: 8px; height: 8px; border-radius: 50%; background: #60a5fa; animation: typing 1.4s infinite; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 60%, 100% { opacity: 0.3; transform: translateY(0); } 30% { opacity: 1; transform: translateY(-10px); } }
    </style>
</head>
<body>
    <div class="particles-container" id="particlesContainer"></div>
    <div class="content">
        <nav>
            <div class="nav-container">
                <a href="index.html" class="nav-logo">Faxtifar</a>
                <div class="nav-links hidden md:flex">
                    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="index.html#skills">–ù–∞–≤—ã–∫–∏</a>
                    <a href="index.html#game">–ò–≥—Ä–∞</a>
                    <a href="index.html#about">–û–±–æ –º–Ω–µ</a>
                    <a href="ai-lab.html" style="color: #60a5fa;">AI –õ–∞–±</a>
                </div>
            </div>
        </nav>
        <div class="ai-lab-container">
            <div class="ai-info">
                <h2>ü§ñ AI –ü–æ–º–æ—â–Ω–∏–∫</h2>
                <p>–Ø –ø–æ–º–Ω—é –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –Ω–∞—à–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∏ –¥–∞—é —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞.</p>
                <p style="margin-top: 1.5rem; font-size: 0.85rem; color: #64748b;">üí° –°–ø—Ä–∞—à–∏–≤–∞–π –æ –ª—é–±—ã—Ö —è–∑—ã–∫–∞—Ö: Python, JavaScript, HTML/CSS, Java, C++, Go –∏ —Ç.–¥.</p>
                <p style="margin-top: 1rem; font-size: 0.85rem; color: #64748b;">üì∏ –ú–æ–∂–µ—à—å –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–¥–∞ –∏–ª–∏ –æ—à–∏–±–æ–∫.</p>
                <p style="margin-top: 1rem; font-size: 0.85rem; color: #64748b;">‚ö° –Ø –∏—Å–ø–æ–ª—å–∑—É—é –º–æ—â–Ω—ã–π –ò–ò –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã!</p>
            </div>
            <div class="chat-container">
                <div class="chat-header">
                    <h3>üí¨ –ß–∞—Ç —Å –£–º–Ω—ã–º –ò–ò</h3>
                    <p>–ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏</p>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai">
                        <div class="message-avatar">ü§ñ</div>
                        <div class="message-content">–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π AI –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –º–æ—â–Ω–æ–º –ò–ò. –Ø –∑–Ω–∞—é Python, JavaScript, HTML/CSS, Java, C++, Go –∏ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏. –°–ø—Ä–∞—à–∏–≤–∞–π —á—Ç–æ —É–≥–æ–¥–Ω–æ ‚Äî —è –¥–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞! üöÄ</div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <div class="input-controls">
                        <button class="file-input-btn" id="uploadImageBtn"><i class="fas fa-image"></i></button>
                        <input type="file" id="imageInput" accept="image/*">
                    </div>
                    <textarea class="chat-input" id="chatInput" placeholder="–ù–∞–ø–∏—à–∏ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å..." rows="1"></textarea>
                    <button class="send-btn" id="sendBtn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </div>
    <script>
        let conversationHistory = [];
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatMessages = document.getElementById('chatMessages');
        const uploadImageBtn = document.getElementById('uploadImageBtn');
        const imageInput = document.getElementById('imageInput');

        function createParticles() {
            const container = document.getElementById('particlesContainer');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 4 + 2;
                const duration = Math.random() * 10 + 15;
                const delay = Math.random() * 5;
                const xOffset = Math.random() * 100 - 50;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = '-10px';
                particle.style.setProperty('--tx', xOffset + 'px');
                particle.style.animation = `fall ${duration}s linear ${delay}s infinite`;
                container.appendChild(particle);
            }
        }

        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = isUser ? 'üë§' : 'ü§ñ';
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            if (!isUser) {
                contentDiv.innerHTML = marked.parse(content);
            } else {
                contentDiv.textContent = content;
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            if (!isUser) {
                contentDiv.querySelectorAll('pre code').forEach(block => {
                    hljs.highlightElement(block);
                });
            }
        }

        function showTypingIndicator() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            messageDiv.id = 'typingIndicator';
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'ü§ñ';
            const contentDiv = document.createElement('div');
            contentDiv.className = 'typing-indicator';
            contentDiv.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        async function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            addMessage(message, true);
            conversationHistory.push({ role: 'user', content: message });
            chatInput.value = '';
            chatInput.style.height = 'auto';
            sendBtn.disabled = true;
            showTypingIndicator();

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${process.env.OPENAI_API_KEY || 'sk-test'}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4.1-mini',
                        messages: [
                            { role: 'system', content: '–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –î–∞–≤–∞–π —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞. –ò—Å–ø–æ–ª—å–∑—É–π Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.' },
                            ...conversationHistory
                        ],
                        temperature: 0.7,
                        max_tokens: 1000
                    })
                });

                if (!response.ok) {
                    throw new Error('API error');
                }

                const data = await response.json();
                const aiResponse = data.choices[0].message.content;
                conversationHistory.push({ role: 'assistant', content: aiResponse });
                
                removeTypingIndicator();
                addMessage(aiResponse, false);
            } catch (error) {
                removeTypingIndicator();
                const fallbackResponse = '–ò–∑–≤–∏–Ω–∏, –Ω–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ò–ò. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. üòï';
                addMessage(fallbackResponse, false);
            }

            sendBtn.disabled = false;
            chatInput.focus();
        }

        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 100) + 'px';
        });

        uploadImageBtn.addEventListener('click', () => imageInput.click());
        
        imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message user';
                    const avatar = document.createElement('div');
                    avatar.className = 'message-avatar';
                    avatar.textContent = 'üë§';
                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'message-content';
                    const img = document.createElement('img');
                    img.style.maxWidth = '100%';
                    img.style.maxHeight = '200px';
                    img.style.borderRadius = '8px';
                    img.src = event.target.result;
                    contentDiv.appendChild(img);
                    messageDiv.appendChild(avatar);
                    messageDiv.appendChild(contentDiv);
                    chatMessages.appendChild(messageDiv);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                };
                reader.readAsDataURL(file);
            }
        });

        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        window.addEventListener('load', createParticles);
        chatInput.focus();
    </script>
</body>
</html>
